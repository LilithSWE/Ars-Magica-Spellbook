import{r as t,j as e}from"./index-1schVQeS.js";import{s as m}from"./supabaseClient-BpXDc_RF.js";import{Login as h}from"./Login-B-0duzGG.js";function k(){const[a,i]=t.useState(!1),[l,o]=t.useState(!1);return t.useEffect(()=>{const n=localStorage.getItem("sb-eqnkywknmhgrrrhprwbe-auth-token");if(n){const s=JSON.parse(n);(async()=>{if(s){const{data:c,error:r}=await m.auth.setSession({access_token:s.access_token,refresh_token:s.refresh_token});r?(r.message.includes("refresh token expired")?console.error("Error: Refresh token has expired."):console.error("Error setting session:",r),localStorage.removeItem("sb-eqnkywknmhgrrrhprwbe-auth-token"),localStorage.removeItem("user_id")):(console.log("Successful in setting session:",c),localStorage.setItem("user_id",s.user.id),i(!0))}else{console.error("Can't find access_token data"),localStorage.removeItem("sb-eqnkywknmhgrrrhprwbe-auth-token"),localStorage.removeItem("user_id");return}o(!0)})()}else o(!0)},[]),e.jsx(e.Fragment,{children:l?e.jsx(e.Fragment,{children:a?e.jsx(e.Fragment,{children:e.jsx("h1",{children:'This will later be routed to a "logged in" start page'})}):e.jsx(e.Fragment,{children:e.jsx(h,{})})}):e.jsx(e.Fragment,{children:e.jsx("h1",{children:"Failed to see if previously logged in or not..."})})})}export{k as Home};
